@model  CommonService.Model.Milepost.J_Milepost
@using CommonService.Model;
@using CommonService.Common;
@using Context;
@{
    Layout = "~/Views/Shared/_EditDialogFormTemplate.cshtml";//带表单提交的编辑页面固定模板

    //稽查人判断1，当当前人是被稽查人时（隐藏功能按钮-开放被稽查意见功能）
    bool isbjcr = false;
    bool isbcjr = false;
    #region 如果是进来填写的情况
    string validataMsg = "";
    string sxtitle = "首席专家";
    //数据权限验证
    if (ViewBag.RoleId == 10 || ViewBag.RoleId == 12)//专家部长
    {
        validataMsg = "if ($('#J_Milepost_ZUserinfo_code').val() == '请选择' || $('#J_Milepost_ZUserinfo_code').val() == '0') {alertMsg.info('请选择一个主办律师！');return;}";
    }
    if (ViewBag.RoleId == 9)
    {
        validataMsg = " var sxzjnumber = 2; if ($('#J_Milepost_ZUserinfo_code').val() == '请选择' || $('#J_Milepost_ZUserinfo_code').val() == '0') {sxzjnumber--; } if ($('#J_Milepost_DepUserinfo_code').val() == '请选择' || $('#J_Milepost_DepUserinfo_code').val() == '0') {sxzjnumber--; } if (sxzjnumber == 0) { alertMsg.info('请选择一个主办律师或部长！'); return; }";
    }
    if (ViewBag.RoleId == 11)
    {
        validataMsg = "if ($('#J_Milepost_GenerUserinfo_code').val() == '请选择' || $('#J_Milepost_GenerUserinfo_code').val() == '0') {alertMsg.info('请选择一个分公司总经理！');return;}";
    }

    #endregion

    #region 如果是进来稽查和确认
    if (Model.J_Milepost_CaseNumber != null && Model.J_Milepost_CaseNumber != "" && ViewBag.IsMessage)
    {

        //被稽查人判断
        if (Model.J_Milepost_ZUserinfo_code == ViewBag.UserCode || Model.J_Milepost_DepUserinfo_code == ViewBag.UserCode || Model.J_Milepost_GenerUserinfo_code == ViewBag.UserCode)
        {
            isbjcr = true;
        }

        if (ViewBag.RoleId == 9)
        {

            isbcjr = true;
        }
        if (ViewBag.RoleId == 1019 || ViewBag.RoleId == 1018)
        {
            sxtitle = "院长";
            isbcjr = true;
        }


    }



    #endregion





}
@{
    ViewBag.Title = "稽查";
}
@section HeadScript{
    <script type="text/javascript">
    document.onkeyup = function (e) {      //onkeyup是javascript的一个事件、当按下某个键弹起 var _key; //的时触发
        if (e == null) { // ie
            _key = event.keyCode;
        } else { // firefox              //获取你按下键的keyCode
            _key = e.which;          //每个键的keyCode是不一样的
        }
        if (_key == 13) {   //判断keyCode是否是13，也就是回车键(回车的keyCode是13)
            ValidataForm(document.getElementById('btnSave'));
        }
    }

    $(document).ready(function () {

        $("#likeCase").hide();
        $("#likeMsg").hide();
        $("#entityChangeDetails").hide();

        $("#J_Milepost_CaseNumber").keyup(function () {
            if ($("#J_Milepost_CaseNumber").val() == "") {
                $("#likeCase").hide();
            } else {
                $("#likeCase").show();
                //异步查询数据
                $.ajax({
                    type: "POST",
                    async: true,
                    url: "/Milepost/NoMilepost/LikeCase/",
                    data: { IsPreSetManager: '@ViewBag.IsPreSetManager', RoleId: '@ViewBag.RoleId', UserCode: '@ViewBag.UserCode', PostCode: '@ViewBag.PostCode', OrgCode: '@ViewBag.OrgCode', LikeName: $("#J_Milepost_CaseNumber").val() },
                    success: function (result) {
                        $("#likeCase").html(result);
                    }
                })
            }



        });




        ///反绑定
        if ($("#J_Milepost_CaseNumber").val() != "") {
            SetCode('@ViewBag.CaseCode');

            var J_Milepost_Type = '@Model.J_Milepost_Type';
            var IsMessage = "@ViewBag.IsMessage";
            if (J_Milepost_Type == '1') {
                document.getElementById("J_Milepost_DocumentPo").value = '@Model.J_Milepost_DocumentPo';
                document.getElementById("J_Milepost_Filing").value = '@Model.J_Milepost_Filing';
                document.getElementById("J_Milepost_Preservation").value = '@Model.J_Milepost_Preservation';
                document.getElementById("J_Milepost_Firstcomplete").value = '@Model.J_Milepost_Firstcomplete';
                document.getElementById("J_Milepost_Firstinstance").value = '@Model.J_Milepost_Firstinstance';
                document.getElementById("J_Milepost_Conciliation").value = '@Model.J_Milepost_Conciliation';
                document.getElementById("J_Milepost_Prosecution").value = '@Model.J_Milepost_Prosecution';
                document.getElementById("J_Milepost_Filing").value = '@Model.J_Milepost_Filing';
                document.getElementById("J_Milepost_Verdict").value = '@Model.J_Milepost_Verdict';
            }
            else if (J_Milepost_Type == '2') {
                document.getElementById("J_Milepost_Preservation").value = '@Model.J_Milepost_Preservation';
                document.getElementById("J_Milepost_Firstinstance").value = '@Model.J_Milepost_Firstinstance';
                document.getElementById("J_Milepost_Conciliation").value = '@Model.J_Milepost_Conciliation';
                document.getElementById("J_Milepost_Prosecution").value = '@Model.J_Milepost_Prosecution';
                document.getElementById("J_Milepost_Verdict").value = '@Model.J_Milepost_Verdict';
            }
            else {
                document.getElementById("J_Milepost_DocumentPo").value = '@Model.J_Milepost_DocumentPo';
                document.getElementById("J_Milepost_Preservation").value = '@Model.J_Milepost_Preservation';
                document.getElementById("J_Milepost_Filing").value = '@Model.J_Milepost_Filing';
                document.getElementById("J_Milepost_Firstinstance").value = '@Model.J_Milepost_Firstinstance';
                document.getElementById("J_Milepost_Firstcomplete").value = '@Model.J_Milepost_Firstcomplete';

                }



                if (IsMessage == "True") {

                  if (document.getElementById("J_Milepost_AdMessageType") != null) {
                        document.getElementById("J_Milepost_AdMessageType").value = '@Model.J_Milepost_AdMessageType';
                    }
                    if (document.getElementById("J_Milepost_TJMessageType") != null) {
                        document.getElementById("J_Milepost_TJMessageType").value = '@Model.J_Milepost_TJMessageType';
                    }
                    if (document.getElementById("J_Milepost_Z_AdMessageType") != null) {
                        document.getElementById("J_Milepost_Z_AdMessageType").value = '@Model.J_Milepost_Z_AdMessageType';
                    }
                    if (document.getElementById("J_Milepost_Z_TJMessageType") != null) {
                        document.getElementById("J_Milepost_Z_TJMessageType").value = '@Model.J_Milepost_Z_TJMessageType';
                    }
                    if (document.getElementById("J_Milepost_Dep_AdMessageType") != null) {
                        document.getElementById("J_Milepost_Dep_AdMessageType").value = '@Model.J_Milepost_Dep_AdMessageType';
                    }
                    if (document.getElementById("J_Milepost_Dep_TJMessageType") != null) {
                        document.getElementById("J_Milepost_Dep_TJMessageType").value = '@Model.J_Milepost_Dep_TJMessageType';
                    }


                    //禁用控件
                    $("#J_Milepost_JTime").attr("disabled", "disabled");
                    $("#J_Milepost_CaseNumber").attr("disabled", "disabled");
                    $("#J_Milepost_DocumentPo").attr("disabled", "disabled");
                    $("#J_Milepost_Filing").attr("disabled", "disabled");
                    $("#J_Milepost_Preservation").attr("disabled", "disabled");

                    $("#J_Milepost_Firstcomplete").attr("disabled", "disabled");
                    $("#J_Milepost_Firstinstance").attr("disabled", "disabled");
                    $("#J_Milepost_Preservation").attr("disabled", "disabled");


                    $("#J_Milepost_Verdict").attr("disabled", "disabled");
                    $("#J_Milepost_Prosecution").attr("disabled", "disabled");
                    $("#J_Milepost_Conciliation").attr("disabled", "disabled");
                    $("#J_Milepost_EntityScore").attr("disabled", "disabled");
                    $("#J_Milepost_ProgramScoreY").attr("disabled", "disabled");
                    $("#J_Milepost_ProgramScoreS").attr("disabled", "disabled");
                    $("#J_Milepost_CaseScore").attr("disabled", "disabled");


                    $("#J_Milepost_ZUserinfo_code").attr("disabled", "disabled");
                    $("#J_Milepost_XUserinfo_code").attr("disabled", "disabled");
                    $("#J_Milepost_DepUserinfo_code").attr("disabled", "disabled");
                    $("#J_Milepost_GenerUserinfo_code").attr("disabled", "disabled");
                }

            }


        });

        function likeMsg_out() {
            $("#likeMsg").hide();
        }
        function likeMsg_move() {
            $("#likeMsg").show();
        }

        var CaseCode;
        function SetCaseNumber(val1, cacode) {
            CaseCode = cacode;
            $("#J_Milepost_CaseNumber").val(val1);
            $("#likeCase").hide();


            SetCode(cacode);

        }

        function SetCode(cacode) {
            CaseCode = cacode;
            //对应主办
            $.ajax({
                type: "POST",
                async: true,
                url: "/Milepost/Milepost/ZUserNames",
                data: { CaseCode: cacode, zbcode: '@Model.J_Milepost_ZUserinfo_code' },
            success: function (result) {
                $("#J_Milepost_ZUserinfo_code").html(result);

                $("#zbname").html(document.getElementById("J_Milepost_ZUserinfo_code").options[document.getElementById("J_Milepost_ZUserinfo_code").options.selectedIndex].text);

            }
        })

        //对应协办
        $.ajax({
            type: "POST",
            async: true,
            url: "/Milepost/Milepost/XUserNames",
            data: { CaseCode: cacode, zbcode: '@Model.J_Milepost_XUserinfo_code' },
            success: function (result) {
                $("#J_Milepost_XUserinfo_code").html(result);
            }
        })

        //对应部长
        $.ajax({
            type: "POST",
            async: true,
            url: "/Milepost/Milepost/DepUserNames",
            data: { CaseCode: cacode, zbcode: '@Model.J_Milepost_DepUserinfo_code' },
            success: function (result) {
                $("#J_Milepost_DepUserinfo_code").html(result);

                $("#bzname").html(document.getElementById("J_Milepost_DepUserinfo_code").options[document.getElementById("J_Milepost_DepUserinfo_code").options.selectedIndex].text);
            }
        })

        //对应分总
        $.ajax({
            type: "POST",
            async: true,
            url: "/Milepost/Milepost/FZUserNames",
            data: { CaseCode: cacode, zbcode: '@Model.J_Milepost_GenerUserinfo_code' },
            success: function (result) {
                $("#J_Milepost_GenerUserinfo_code").html(result);
            }
        })

        //对应显示是否被稽查过

        $.ajax({
            type: "POST",
            async: true,
            url: "/Milepost/Milepost/LikeMsg",
            data: { CaseCode: cacode, msgs: 1, type: '@Model.J_Milepost_Type', MilepostID: '@Model.J_Milepost_id' },
            success: function (result) {
                if (result == "") {
                    $("#likeMsg").hide();
                    $("#f_msg").show();
                } else {
                    $("#f_msg").hide();
                }
                $("#likemsgtitle").html(result);
            }
        })
        $.ajax({
            type: "POST",
            async: true,
            url: "/Milepost/Milepost/LikeMsg",
            data: { CaseCode: cacode, msgs: 2, type: '@Model.J_Milepost_Type', MilepostID: '@Model.J_Milepost_id' },
            success: function (result) {
                $("#likeMsg").html(result);
            }
        })

    }

        function TJ_Ck(number) {

        var typename = "";
        var contentname = "";

        if (number == 0) {

            //判断是否选择意见
            if ($("#J_Milepost_Z_TJMessageType").val() == "") {
                alertMsg.info("请选择意见！");
                return;
            }

            typename = $("#J_Milepost_Z_TJMessageType").val();
            contentname = $("#J_Milepost_Z_TJMessageContent").val();


        } else if (number == 1) {

            //判断是否选择意见
            if ($("#J_Milepost_Dep_TJMessageType").val() == "") {
                alertMsg.info("请选择意见！");
                return;
            }

            typename = $("#J_Milepost_Dep_TJMessageType").val();
            contentname = $("#J_Milepost_Dep_TJMessageContent").val();


        } else {


            //判断是否选择意见
            if ($("#J_Milepost_TJMessageType").val() == "") {
                alertMsg.info("请选择意见！");
                return;
            }

            typename = $("#J_Milepost_TJMessageType").val();
            contentname = $("#J_Milepost_TJMessageContent").val();

        }

        $.ajax({
            type: "POST",
            async: false,
            url: "/Milepost/Milepost/TJ_Ck",
            data: { J_Milepost_id: '@Model.J_Milepost_id', J_Milepost_TJMessageType: typename, J_Milepost_TJMessageContent: contentname, Number: number },
            success: function (result) {
                if (result > 0) {
                    alertMsg.info("操作成功！");

                }
            }
        })
        window.location = window.location;
    }

    function JC_Ck(number) {

        //判断是否选择意见
        if ($("#J_Milepost_AdMessageType").val() == "") {
            alertMsg.info("请选择意见！");
            return;
        }

        $.ajax({
            type: "POST",
            async: false,
            url: "/Milepost/Milepost/JC_Ck?Status=" + number,
            data: $("#formJ_Milepost").serialize(),
            success: function (result) {
                if (result > 0) {
                    alertMsg.info("操作成功！");

                }
            }
        })
        window.location = window.location;
    }

    function ValidataForm(val, typeid) {


        if ($("#J_Milepost_ProgramScoreY").val() == "" && $("#J_Milepost_ProgramScoreS").val() == "" && $("#J_Milepost_EntityScore").val() == "" && $("#J_Milepost_CaseScore").val() == "") {
            alertMsg.info("无法保存，案件稽核得分四项请至少填写一项得分！");
            return;
        }


        var number = 0;
        $.ajax({
            type: "POST",
            async: false,
            url: "/Milepost/NoMilepost/ValidataForm",
            data: { J_No_Milepost_CaseNumber: $("#J_Milepost_CaseNumber").val() },
            success: function (result) {
                if (result > 0) {
                    number = 1;

                }
            }
        });

        @Html.Raw(validataMsg)





        if (number == 1) {
            if (typeid == 1) {
                onlySaveForm(val);
            } else {
                saveAndNewNext(val)
            }

        } else {
            alertMsg.info("无法保存，可能是该案件编号不存在或者是该案件无首席专家！");
        }

    }
    function dchange(val) {

        if ($(val).val() == "修改稽查信息") {

            $("#J_Milepost_DocumentPo").removeAttr("disabled");
            $("#J_Milepost_Filing").removeAttr("disabled");
            $("#J_Milepost_Preservation").removeAttr("disabled");

            $("#J_Milepost_Firstcomplete").removeAttr("disabled");
            $("#J_Milepost_Firstinstance").removeAttr("disabled");
            $("#J_Milepost_Preservation").removeAttr("disabled");


            $("#J_Milepost_Verdict").removeAttr("disabled");
            $("#J_Milepost_Prosecution").removeAttr("disabled");
            $("#J_Milepost_Conciliation").removeAttr("disabled");
            $("#J_Milepost_EntityScore").removeAttr("disabled");
            $("#J_Milepost_ProgramScoreY").removeAttr("disabled");
            $("#J_Milepost_ProgramScoreS").removeAttr("disabled");
            $("#J_Milepost_CaseScore").removeAttr("disabled");


            $("#J_Milepost_ZUserinfo_code").removeAttr("disabled");
            $("#J_Milepost_XUserinfo_code").removeAttr("disabled");
            $("#J_Milepost_DepUserinfo_code").removeAttr("disabled");
            $("#J_Milepost_GenerUserinfo_code").removeAttr("disabled");

        } else {
            $("#J_Milepost_DocumentPo").attr("disabled", "disabled");
            $("#J_Milepost_Filing").attr("disabled", "disabled");
            $("#J_Milepost_Preservation").attr("disabled", "disabled");

            $("#J_Milepost_Firstcomplete").attr("disabled", "disabled");
            $("#J_Milepost_Firstinstance").attr("disabled", "disabled");
            $("#J_Milepost_Preservation").attr("disabled", "disabled");


            $("#J_Milepost_Verdict").attr("disabled", "disabled");
            $("#J_Milepost_Prosecution").attr("disabled", "disabled");
            $("#J_Milepost_Conciliation").attr("disabled", "disabled");
            $("#J_Milepost_EntityScore").attr("disabled", "disabled");
            $("#J_Milepost_ProgramScoreY").attr("disabled", "disabled");
            $("#J_Milepost_ProgramScoreS").attr("disabled", "disabled");
            $("#J_Milepost_CaseScore").attr("disabled", "disabled");


            $("#J_Milepost_ZUserinfo_code").attr("disabled", "disabled");
            $("#J_Milepost_XUserinfo_code").attr("disabled", "disabled");
            $("#J_Milepost_DepUserinfo_code").attr("disabled", "disabled");
            $("#J_Milepost_GenerUserinfo_code").attr("disabled", "disabled");
        }
    }

    function opewh_1(val) {
        if (CaseCode == undefined) {
            alertMsg.info("请选择一个案号！");
            return;
        }
        var url = val + '?fkCode=' + CaseCode + '&fkType=@Convert.ToInt32(FlowTypeEnum.案件)';

        _openDialog('案件执行情况', url, 1200, 600);
    }

    function likemsgf() {
        $("#likeMsg").fadeToggle();
    }

    function Dtl(ID) {

        _openDialog('详情', "/Milepost/Milepost/DefaultLayout?J_Milepost_id=" + ID, 1200, 600);
    }
    //打开进程条目变更信息容器
    function openEntityChangeDetails() {
        if (CaseCode == undefined) {
            alertMsg.info("请选择一个案号！");
            return;
        }

        var client_url = '/MonitorManager/Entry_Change/EntryChangeRecord?pkCode=' + CaseCode;
        $.ajax({
            type: "POST",
            async: true,
            url: client_url,
            success: function (result) {
                $("#entityChangeDetails").html(result);
            }
        })
        $("#entityChangeDetails").fadeToggle();
    }
    //关闭进程条目变更信息容器
    function closeEntityChangeDetails() {
        $("#entityChangeDetails").hide();
    }
    //移动进程条目变更信息容器
    function moveEntityChangeDetails() {
        $("#entityChangeDetails").show();
    }
    </script>
}
<style>
    a {
        font-size: 12px;
        color: blue;
        text-decoration: underline;
    }

        a:hover {
            font-size: 12px;
            color: blue;
            text-decoration: underline;
        }

    .style a {
        text-decoration: underline;
    }
    .formtitle span{z-index:0;}
</style>
<div class="formbody" style="overflow: auto; height:600px; ">
    <div class="formtitle"><span>基本信息</span> </div>

    <ul class="forminfo">
        @using (Html.BeginForm("Save", "Milepost", FormMethod.Post, new { id = "formJ_Milepost", onsubmit = "return validateCallback(this,dialogAjaxDone);" }))
        {
            @Html.Hidden("formOperateType")//表单操作类型：固定写法，只是保存，值为'onlySave';保存并且新增，值为'saveAndNewNext'
                                        @Html.Hidden("J_Milepost_id", Model.J_Milepost_id)
                                        @Html.Hidden("J_Milepost_code", Model.J_Milepost_code)
                                        @Html.Hidden("J_Milepost_isDelete", Model.J_Milepost_isDelete)
                                        @Html.Hidden("J_Milepost_Auditor", Model.J_Milepost_Auditor)
                                        @Html.Hidden("J_Milepost_createTime", Model.J_Milepost_createTime)
                                        @Html.Hidden("J_Milepost_Type", Model.J_Milepost_Type)


                                        <li>
                                            <label>稽查时间</label>@Html.TextBox("J_Milepost_JTime", Model.J_Milepost_JTime == null ? "" : Model.J_Milepost_JTime.ToString("yyyy-MM-dd HH:mm:ss"), new { date = "date", maxlength = "20", @readonly = "readonly", dateformat = "yyyy-MM-dd HH:mm:ss", @class = "dfinput", requiredInput = "请选择日期" })<i></i>
                                            <a title="案件执行情况" style="cursor:pointer;" dialogwidth="1250" dialogheight="650" edit="edit" onclick="opewh_1('/casemanager/caseexecute/DefaultLayout')"><span><img src="/theme/images/goexe.png" /></span></a>
                                        </li>

                                        <li>
                                            <label>案号</label>@Html.TextBox("J_Milepost_CaseNumber", Model.J_Milepost_CaseNumber, new { @class = "dfinput", requiredInput = "请输入案件编号", maxlength = "50" })
                                            <i title="点击查看更多" id="likemsgtitle"></i>
                                            <a id="delaySituation" href="#" onmouseout="closeEntityChangeDetails()" onclick="openEntityChangeDetails()" class="style">进程情况</a>
                                            <a href="#" onmouseout="likeMsg_out()" onclick="likemsgf()" class="style">稽查历史</a><font id="f_msg" style="color:gray;">（注：请录入案件号后点击查看稽查历史）</font>
                                        </li>


                                        <li><label>稽核人</label>@Model.J_Milepost_AuditorName<i></i></li>

                                        <div class="formtitle"><span>稽核对象</span></div>
            if (UIContext.Current.IsPreSetManager)
            { 
             <li>
                        <label>独立/主办律师</label>
                        <select name="J_Milepost_ZUserinfo_code" id="J_Milepost_ZUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                        <label style="text-align:center">协办/助理律师</label>
                        <select name="J_Milepost_XUserinfo_code" id="J_Milepost_XUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>

                    <li>
                        <label>部长</label>
                        <select name="J_Milepost_DepUserinfo_code" id="J_Milepost_DepUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
             <li>
                        <label>分公司总经理</label>
                        <select name="J_Milepost_GenerUserinfo_code" id="J_Milepost_GenerUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
            }
            if (!ViewBag.IsMessage)
            {
                if (ViewBag.RoleId == 10)
                {
                    <li>
                        <label>独立/主办律师</label>
                        <select name="J_Milepost_ZUserinfo_code" id="J_Milepost_ZUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                        <label style="text-align:center">协办/助理律师</label>
                        <select name="J_Milepost_XUserinfo_code" id="J_Milepost_XUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }

                if (ViewBag.RoleId == 12 || ViewBag.RoleId == 9)
                {
                    <li>
                        <label>独立/主办律师</label>
                        <select name="J_Milepost_ZUserinfo_code" id="J_Milepost_ZUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                        <label style="text-align:center">协办/助理律师</label>
                        <select name="J_Milepost_XUserinfo_code" id="J_Milepost_XUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>

                    <li>
                        <label>部长</label>
                        <select name="J_Milepost_DepUserinfo_code" id="J_Milepost_DepUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }
                if (ViewBag.RoleId == 11)
                {
                    <li>
                        <label>分公司总经理</label>
                        <select name="J_Milepost_GenerUserinfo_code" id="J_Milepost_GenerUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }
            }
            else
            {
             

                if (ViewBag.RoleId == 9 || ViewBag.RoleId == 12)
                {
                    <li>
                        <label>独立/主办律师</label>
                        <select name="J_Milepost_ZUserinfo_code" id="J_Milepost_ZUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                        <label style="text-align:center">协办/助理律师</label>
                        <select name="J_Milepost_XUserinfo_code" id="J_Milepost_XUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>

                    <li>
                        <label>部长</label>
                        <select name="J_Milepost_DepUserinfo_code" id="J_Milepost_DepUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                   
                }
                if (ViewBag.RoleId == 10)
                {
                    <li>
                        <label>部长</label>
                        <select name="J_Milepost_DepUserinfo_code" id="J_Milepost_DepUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }

                if (ViewBag.RoleId == 7)
                {
                    <li>
                        <label>独立/主办律师</label>
                        <select name="J_Milepost_ZUserinfo_code" id="J_Milepost_ZUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                        <label style="text-align:center">协办/助理律师</label>
                        <select name="J_Milepost_XUserinfo_code" id="J_Milepost_XUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }
                   if (ViewBag.RoleId == 12 || ViewBag.RoleId == 11 || ViewBag.RoleId == 1018 || ViewBag.RoleId == 1019)
                {
                    <li>
                        <label>分公司总经理</label>
                        <select name="J_Milepost_GenerUserinfo_code" id="J_Milepost_GenerUserinfo_code">
                            <option value="0">请选择一个案件</option>
                        </select>
                        <i></i>
                    </li>
                }
            }

            <div class="formtitle"><span>稽查程序事项</span></div>

            if (Model.J_Milepost_Type == 1)
            {
                <li>
                    <label>文书制作</label>
                    <select name="J_Milepost_DocumentPo" id="J_Milepost_DocumentPo">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;保全</label>
                    <select name="J_Milepost_Firstcomplete" id="J_Milepost_Firstcomplete">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="4">4</option>
                    </select>
                    <i></i>
                </li>

                <li>
                    <label>立案</label>
                    <select name="J_Milepost_Filing" id="J_Milepost_Filing">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一审完成</label>
                    <select name="J_Milepost_Firstinstance" id="J_Milepost_Firstinstance">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="3">3</option>

                    </select>
                    <i></i>
                </li>
                <li>
                    <label>一审排庭</label>
                    <select name="J_Milepost_Preservation" id="J_Milepost_Preservation">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>

                </li>
            }
            else if (Model.J_Milepost_Type == 2)
            {
                <li>
                    <label>二审排庭</label>
                    <select name="J_Milepost_Preservation" id="J_Milepost_Preservation">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="3">3</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二审完成</label>
                    <select name="J_Milepost_Firstinstance" id="J_Milepost_Firstinstance">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="7">7</option>
                    </select>
                    <i></i>
                </li>
            }
            else
            {
                <li>
                    <label>执行立案</label>
                    <select name="J_Milepost_DocumentPo" id="J_Milepost_DocumentPo">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">&nbsp;执行措施实施</label>
                    <select name="J_Milepost_Filing" id="J_Milepost_Filing">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="4">4</option>
                    </select>
                    <i></i>
                </li>
                <li>
                    <label>执行程序完结</label>
                    <select name="J_Milepost_Preservation" id="J_Milepost_Preservation">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="5">5</option>
                    </select>
                    <i></i>

                </li>
            }





            <div class="formtitle"><span>稽查实体事项</span></div>

            if (Model.J_Milepost_Type == 1 || Model.J_Milepost_Type == 2)
            {
                <li>
                    <label>调解书</label>
                    <select name="J_Milepost_Conciliation" id="J_Milepost_Conciliation">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;判决结果</label>
                    <select name="J_Milepost_Verdict" id="J_Milepost_Verdict">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>

                    </select>
                    <i></i>
                </li>
                <li>
                    <label>起诉状</label>
                    <select name="J_Milepost_Prosecution" id="J_Milepost_Prosecution">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                </li>
            }
            else
            {
                <li>
                    <label>执行和解协议</label>
                    <select name="J_Milepost_Firstinstance" id="J_Milepost_Firstinstance">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                    </select>
                    <i></i>
                    <label style="text-align:center">强制执行申请书</label>
                    <select name="J_Milepost_Firstcomplete" id="J_Milepost_Firstcomplete">
                        <option value="空">空</option>
                        <option value="0">0</option>
                        <option value="1">1</option>

                    </select>
                    <i></i>
                </li>
            }

            <div class="formtitle"><span>案件稽核得分</span></div>

            <li>
                <label>程序项应得分</label>
                @Html.TextBox("J_Milepost_ProgramScoreY", Model.J_Milepost_ProgramScoreY, new { @class = "dfinput", maxlength = "50" })
                <i></i>
            </li>
            <li>
                <label>程序项实得分</label>
                @Html.TextBox("J_Milepost_ProgramScoreS", Model.J_Milepost_ProgramScoreS, new { @class = "dfinput", maxlength = "50" })
                <i></i>
            </li>
            <li>
                <label>实体项实得分</label>
                @Html.TextBox("J_Milepost_EntityScore", Model.J_Milepost_EntityScore, new { @class = "dfinput", maxlength = "50" })
                <i></i>
            </li>
            <li>
                <label>案件最终稽查得分</label>
                @Html.TextBox("J_Milepost_CaseScore", Model.J_Milepost_CaseScore, new { @class = "dfinput", maxlength = "50" })
                <i></i>
            </li>

            if (ViewBag.IsMessage)
            {
                <div class="formtitle"><span>被稽核人意见</span></div>
            
              if (ViewBag.RoleId == 10)
                {
                    <li>
                        <label>部长</label>
                        <label id="bzname"></label>
                        <i></i>
                    </li>
                    <li>
                        <label>意见</label>
                        <select name="J_Milepost_Dep_TJMessageType" id="J_Milepost_Dep_TJMessageType">
                            <option value=""></option>
                            <option value="同意">同意</option>
                            <option value="不同意">不同意</option>
                        </select>
                    </li>
                    <li>
                        <label>备注</label>
                        <textarea name="J_Milepost_Dep_TJMessageContent" id="J_Milepost_Dep_TJMessageContent" rows="5" cols="27">@Model.J_Milepost_Dep_TJMessageContent</textarea>
                        <i></i>
                    </li>
                    <li>
                        @if (isbjcr && Model.J_Milepost_Dep_AdStatus == 1)
                        {
                            <label></label>
                            <input name="" type="button" id="btnSave" onclick="TJ_Ck(1)" class="btn btnmr fl" value="提交稽查确认" /><i></i>
                        }
                        else
                        {
                            <script>
                                $("#J_Milepost_Dep_TJMessageType").attr("disabled", "disabled");
                                $("#J_Milepost_Dep_TJMessageContent").attr("disabled", "disabled");
                            </script>
                        }

                    </li>

                }
                else if (ViewBag.RoleId == 7)
                {
                    <li>
                        <label>主办</label>
                        <label id="zbname"></label>
                        <i></i>
                    </li>
                    <li>
                        <label>意见</label>
                        <select name="J_Milepost_Z_TJMessageType" id="J_Milepost_Z_TJMessageType">
                            <option value=""></option>
                            <option value="同意">同意</option>
                            <option value="不同意">不同意</option>
                        </select>
                    </li>
                    <li>
                        <label>备注</label>
                        <textarea name="J_Milepost_Z_TJMessageContent" id="J_Milepost_Z_TJMessageContent" rows="5" cols="27">@Model.J_Milepost_Z_TJMessageContent</textarea>
                        <i></i>
                    </li>
                    <li>
                        @if (isbjcr && Model.J_Milepost_Z_AdStatus == 1)
                        {
                            <label></label>
                            <input name="" type="button" id="btnSave" onclick="TJ_Ck(0)" class="btn btnmr fl" value="提交稽查确认" /><i></i>
                        }
                        else
                        {
                            <script>
                                $("#J_Milepost_Z_TJMessageType").attr("disabled", "disabled");
                                $("#J_Milepost_Z_TJMessageContent").attr("disabled", "disabled");
                            </script>
                        }

                    </li>

                }
                else
                {
                    if (Model.J_Milepost_GenerUserinfo_code.ToString() != "00000000-0000-0000-0000-000000000000")
                    {
                       
                    <li>
                        <label>意见</label>
                        <select name="J_Milepost_TJMessageType" id="J_Milepost_TJMessageType">
                            <option value=""></option>
                            <option value="同意">同意</option>
                            <option value="不同意">不同意</option>
                        </select>
                    </li>
                    <li>
                        <label>备注</label>
                        <textarea name="J_Milepost_TJMessageContent" id="J_Milepost_TJMessageContent" rows="5" cols="27">@Model.J_Milepost_TJMessageContent</textarea>
                        <i></i>
                    </li>
                    <li>
                        @if (isbjcr && Model.J_Milepost_AdStatus == 1)
                        {
                            <label></label>
                            <input name="" type="button" id="btnSave" onclick="TJ_Ck(2)" class="btn btnmr fl" value="提交稽查确认" /><i></i>
                        }
                        else
                        {
                            <script>
                                $("#J_Milepost_TJMessageType").attr("disabled", "disabled");
                                $("#J_Milepost_TJMessageContent").attr("disabled", "disabled");
                            </script>
                        }

                    </li>
                    }
                    else {
                    
                    <table>

                        <tr>

                            @if (Model.J_Milepost_DepUserinfo_code.ToString() != "00000000-0000-0000-0000-000000000000")
                            {


                                <td width="400">
                        <li>
                            <label>部长</label>
                            <label id="bzname"></label>
                            <i></i>
                        </li>
                        <li>
                            <label>意见</label>
                            <select name="J_Milepost_Dep_TJMessageType" id="J_Milepost_Dep_TJMessageType">
                                <option value=""></option>
                                <option value="同意">同意</option>
                                <option value="不同意">不同意</option>
                            </select>
                        </li>
                        <li>
                            <label>备注</label>
                            <textarea name="J_Milepost_Dep_TJMessageContent" id="J_Milepost_Dep_TJMessageContent" rows="5" cols="27">@Model.J_Milepost_Dep_TJMessageContent</textarea>
                            <i></i>
                        </li>
                        <li>
                            @if (isbjcr && Model.J_Milepost_Dep_AdStatus == 1)
                            {
                                <label></label>
                                <input name="" type="button" id="btnSave" onclick="TJ_Ck(1)" class="btn btnmr fl" value="提交稽查确认" /><i></i>
                            }
                            else
                            {
                                <script>
                                    $("#J_Milepost_Dep_TJMessageType").attr("disabled", "disabled");
                                    $("#J_Milepost_Dep_TJMessageContent").attr("disabled", "disabled");
                                </script>
                            }

                        </li>
                        </td>
                            }
                            @if (Model.J_Milepost_ZUserinfo_code.ToString() != "00000000-0000-0000-0000-000000000000")
                            {

                                <td>

                                <li>
                                    <label>主办</label>
                                    <label id="zbname"></label>
                                    <i></i>
                                </li>
                                <li>
                                    <label>意见</label>
                                    <select name="J_Milepost_Z_TJMessageType" id="J_Milepost_Z_TJMessageType">
                                        <option value=""></option>
                                        <option value="同意">同意</option>
                                        <option value="不同意">不同意</option>
                                    </select>
                                </li>
                                <li>
                                    <label>备注</label>
                                    <textarea name="J_Milepost_Z_TJMessageContent" id="J_Milepost_Z_TJMessageContent" rows="5" cols="27">@Model.J_Milepost_Z_TJMessageContent</textarea>
                                    <i></i>
                                </li>
                                <li>
                                    @if (isbjcr && Model.J_Milepost_Z_AdStatus == 1)
                                    {
                                        <label></label>
                                        <input name="" type="button" id="btnSave" onclick="TJ_Ck(0)" class="btn btnmr fl" value="提交稽查确认" /><i></i>
                                    }
                                    else
                                    {
                                        <script>
                                            $("#J_Milepost_Z_TJMessageType").attr("disabled", "disabled");
                                            $("#J_Milepost_Z_TJMessageContent").attr("disabled", "disabled");
                                        </script>
                                    }

                                </li>



                                </td>
                            }
                            </tr>
                            </table>
                    }
                }
            
            
            
            
            
                <div class="formtitle"><span>@Html.Raw(sxtitle + "裁定")</span></div>
                <li>
                    <label>意见</label>
                    <select name="J_Milepost_AdMessageType" id="J_Milepost_AdMessageType" onchange="dchange(this)">
                        <option value=""></option>
                        <option value="维持原稽查意见">维持原稽查意见</option>
                        <option value="修改稽查信息">修改稽查信息</option>
                    </select>
                </li>
                <li>
                    <label>备注</label>
                    <textarea name="J_Milepost_AdMessageContent" id="J_Milepost_AdMessageContent" rows="5" cols="27">@Model.J_Milepost_AdMessageContent</textarea>
                    <i></i>
                </li>
            }
            if (isbcjr && Model.J_Milepost_AdStatus == 2)
            {
                <li class="buttonWrap clear"><label>&nbsp;</label><input name="" type="button" id="btnSave" onclick="JC_Ck(3)" class="btn btnmr fl" value="确认" /><i></i><input name="" id="btnSaveAndNewNext" type="button" onclick="JC_Ck(4)" class="btn btnmr fl" value="裁决" /><i></i></li>
            }
            else
            {
                <script>
                    $("#J_Milepost_AdMessageType").attr("disabled", "disabled");
                    $("#J_Milepost_AdMessageContent").attr("disabled", "disabled");
                </script>
            }



            if (!isbjcr && !isbcjr && !ViewBag.IsMessage && Model.J_Milepost_AdStatus <= 1)
            {
                <li class="buttonWrap clear"><label>&nbsp;</label><input name="" type="button" id="btnSave" onclick="ValidataForm(this,1)" class="btn btnmr fl" value="确认保存" /><i></i><input name="" id="btnSaveAndNewNext" type="button" onclick="ValidataForm(this,2)" class="btn btnmr fl" value="保存并新增下一个" /><i></i></li>
            }


        }
    </ul>
</div>

<div id="likeCase" style="left: 145px; top: 145px; width: 348px; height: 200px; background-color: #CCFFCC; position: absolute; overflow: auto; border: 1px solid #009900; ">
    <table class="tablelist">
        <tbody style="cursor:pointer;">
            <tr target="sid_Iterm" rel="">
                <td>模糊匹配中，请稍后...</td>
            </tr>
        </tbody>
    </table>
</div>

<div id="likeMsg" onmouseout="likeMsg_out()" onmousemove="likeMsg_move()" style="left: 515px; top: 135px; width: 400px; height: 200px; background-color: #CCFFCC; position: absolute; overflow: auto; border: 1px solid #009900; ">
    <table class="tablelist">
        <tbody style="cursor:pointer;">
            <tr>
                <td>匹配中，请稍后...</td>
            </tr>
        </tbody>
    </table>
</div>
<!--进程条目变更信息容器-->
<div id="entityChangeDetails" onmouseout="closeEntityChangeDetails()" onmousemove="moveEntityChangeDetails()" style="left: 40px; top: 135px; width: 900px; height: 200px; background-color: #CCFFCC; position: absolute; overflow: auto; border: 1px solid #009900; ">
    <table class="tablelist">
        <tbody style="cursor:pointer;">
            <tr>
                <td>匹配中，请稍后...</td>
            </tr>
        </tbody>
    </table>
</div>